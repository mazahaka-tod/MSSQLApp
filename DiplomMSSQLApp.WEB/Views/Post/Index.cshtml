@model DiplomMSSQLApp.WEB.Models.PostListViewModel

@{
    ViewBag.Title = "Штатное расписание";
}

<h2>Штатное расписание</h2>
<hr />

<p>
    @Html.ActionLink("Добавить должность", "Create", null, new { @class = "btn btn-default" })
    @Html.ActionLink("Удалить все должности", "DeleteAll", null, new { @class = "btn btn-default" })
    @Html.ActionLink("Экспортировать данные в JSON файл", "ExportJson", null, new { @class = "btn btn-default" })
</p>

<div id="postsTable">
    @Html.Partial("GetPostsData", Model)
</div>

@section scripts {
    <script>
        $(document).ready(function () {
            // ajax paging
            $(document).on("click", "#contentPager a[href]", function () {
                $.ajax({
                    url: $(this).attr("href"),
                    type: 'GET',
                    cache: false,
                    success: function (result) {
                        $('#postsTable').html(result);
                    }
                });
                return false;
            });
        })
    </script>
}
