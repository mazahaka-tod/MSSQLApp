@model DiplomMSSQLApp.WEB.Models.DepartmentListViewModel

@{
    ViewBag.Title = "Список отделов";
}

<h2>Список отделов</h2>
<hr />

<p>
    @Html.ActionLink("Добавить отдел", "Create", null, new { @class = "btn btn-default" })
    @Html.ActionLink("Удалить все отделы", "DeleteAll", null, new { @class = "btn btn-default" })
    @Html.ActionLink("Экспортировать данные в JSON файл", "ExportJson", null, new { @class = "btn btn-default" })
</p>

<div id="departmentsTable">
    @Html.Partial("GetDepartmentsData", Model)
</div>

@section scripts {
    <script>
        $(document).ready(function () {
            // ajax paging
            $(document).on("click", "#contentPager a[href]", function () {
                $.ajax({
                    url: $(this).attr("href"),
                    type: 'GET',
                    cache: false,
                    success: function (result) {
                        $('#departmentsTable').html(result);
                    }
                });
                return false;
            });
        })
    </script>
}
